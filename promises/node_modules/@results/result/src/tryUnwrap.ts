import { Result } from '@jsr/results__types'
import { isErr } from './isErr.js'

/**
 * Unwraps a result, throwing an error if it is an error
 * @param result a result to unwrap
 * @throws {Error} If the result is an error
 */
export function tryUnwrap<T, E>(
    result: Result<T, E>
): T extends null ? never : T {
    if (isErr(result)) {
        throw result[1]
    }
    return result[0] as T extends null ? never : T
}
